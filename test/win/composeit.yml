services:
  echo_service:
    command: "echo foo bar %TEST1% && pause"
    shell: true
    inherit_environment: false
    environment:
      TEST1: test1
    restart: always
  echo_service2:
    command: echo foo bar %TEST2%
    shell: true
    environment:
      - TEST2=test2${FROM_ENV}
      - PATH

  ping_service1:
    command: ping
    args:
      - "-t"
      - "127.0.0.1"
    working_dir: "C:\\"

  ping_service2:
    inherit_environment: false
    command: [ping, -t, 127.0.0.2]

  ping_service3:
    command: ping 127.0.0.3
    shell: true
    restart: on-failure
    depends_on: ping_service2

  ping_service4:
    command: ping -n ${MAX_REPEAT:-10} 127.0.0.4
    shell: true
    restart: always
    depends_on:
      - ping_service3

  ping_no_log:
    inherit_environment: false
    command: [ping, -t, 127.0.0.5]
    logging:
      driver: none