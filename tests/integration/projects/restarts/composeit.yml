services:
  always:
    command: [python, ../../counter.py]
    restart: always

  fail_restart:
    command: [python, ../../counter.py, --time, 0.01, --exit, 2]
    restart: unless-stopped
    restart_policy:
      window: 0.25
      delay: 0.1
      max_attempts: 3

  restarting:
    command: [python, ../../counter.py, --time, 0.01, --exit, 3, --return-code, 1]
    restart: on-failure
    restart_policy:
      max_attempts: 3

  not_restarting:
    command: [python, ../../counter.py, --time, 0.01, --exit, 3, --return-code, 0]
    restart: "on-failure"

  one_shot:
    command: [python, ../../counter.py, --time, 0.01, --exit, 3, --return-code, 1]
    restart: no

  one_time:
    command: [python, ../../counter.py, --time, 0.01, --exit, 3, --return-code, 1]
    restart: "no"

  one_try:
    command: [python, ../../counter.py, --time, 0.01, --exit, 3, --return-code, 1]
    restart: false

  one_run:
    command: [python, ../../counter.py, --time, 0.01, --exit, 3, --return-code, 1]